{
  "endpoint": "/api/v1/generate_flirts",
  "method": "POST",
  "description": "Generates personalized flirt suggestions based on conversation analysis and user preferences",
  "content_type": "application/json",
  "authentication": "Bearer token required",
  "rate_limits": {
    "requests_per_minute": 20,
    "daily_limit": 200
  },
  "request": {
    "headers": {
      "Authorization": "Bearer {access_token}",
      "Content-Type": "application/json"
    },
    "body": {
      "analysis_id": {
        "type": "string",
        "required": true,
        "description": "ID from previous screenshot analysis"
      },
      "tone_preference": {
        "type": "string",
        "enum": ["playful", "humorous", "sincere"],
        "default": "playful",
        "description": "Desired tone for suggestions"
      },
      "count": {
        "type": "integer",
        "minimum": 1,
        "maximum": 5,
        "default": 3,
        "description": "Number of suggestions to generate"
      },
      "constraints": {
        "type": "object",
        "required": false,
        "properties": {
          "max_length": {
            "type": "integer",
            "default": 280,
            "description": "Maximum character length per suggestion"
          },
          "include_emoji": {
            "type": "boolean",
            "default": true,
            "description": "Whether to include emojis in suggestions"
          },
          "include_question": {
            "type": "boolean", 
            "default": false,
            "description": "Force inclusion of questions"
          },
          "avoid_topics": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Topics to avoid in suggestions"
          }
        }
      },
      "personalization_override": {
        "type": "object",
        "required": false,
        "properties": {
          "humor_style": {
            "type": "string",
            "enum": ["witty", "playful", "sarcastic", "wholesome"]
          },
          "directness_level": {
            "type": "string",
            "enum": ["very_subtle", "subtle", "medium", "bold"]
          }
        }
      }
    }
  },
  "response": {
    "success": {
      "status_code": 200,
      "content_type": "application/json",
      "body": {
        "suggestions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique suggestion identifier"
              },
              "text": {
                "type": "string",
                "description": "The flirt suggestion text"
              },
              "tone": {
                "type": "string",
                "enum": ["playful", "humorous", "sincere"]
              },
              "confidence": {
                "type": "number",
                "minimum": 0,
                "maximum": 1
              },
              "reasoning": {
                "type": "string",
                "description": "Why this suggestion fits the context"
              },
              "voice_available": {
                "type": "boolean",
                "description": "Whether voice synthesis is available"
              },
              "expected_outcome": {
                "type": "string",
                "description": "Predicted response type"
              },
              "backup_suggestion": {
                "type": "string",
                "description": "Follow-up if no response received"
              }
            }
          }
        },
        "refresh_available": {
          "type": "boolean",
          "description": "Whether user can request new suggestions"
        },
        "personalization_updated": {
          "type": "boolean",
          "description": "Whether user profile was updated"
        },
        "overall_strategy": {
          "type": "string",
          "description": "Recommended conversation approach"
        },
        "generation_time_ms": {
          "type": "integer"
        }
      }
    }
  },
  "example_request": {
    "curl": "curl -X POST https://api.vibe8.ai/v1/generate_flirts \\\n  -H \"Authorization: Bearer your_access_token\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"analysis_id\": \"analysis_abc123def456\",\n    \"tone_preference\": \"playful\",\n    \"count\": 3,\n    \"constraints\": {\n      \"max_length\": 280,\n      \"include_emoji\": true,\n      \"avoid_topics\": [\"politics\"]\n    }\n  }'",
    "javascript": "fetch('https://api.vibe8.ai/v1/generate_flirts', {\n  method: 'POST',\n  headers: {\n    'Authorization': 'Bearer your_access_token',\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify({\n    analysis_id: 'analysis_abc123def456',\n    tone_preference: 'playful',\n    count: 3,\n    constraints: {\n      max_length: 280,\n      include_emoji: true\n    }\n  })\n});"
  },
  "example_response": {
    "suggestions": [
      {
        "id": "suggestion_xyz789",
        "text": "Okay but seriously, how do you make hiking look this effortless? I'm over here planning rest stops every 5 minutes üòÖ",
        "tone": "playful",
        "confidence": 0.87,
        "reasoning": "Self-deprecating humor while complimenting their hiking skills, creates relatability and opens conversation",
        "voice_available": true,
        "expected_outcome": "Likely to share hiking tips or experiences, continued engagement",
        "backup_suggestion": "Those trail views though... making me want to upgrade my hiking game ASAP"
      },
      {
        "id": "suggestion_abc456",
        "text": "Your photography skills are making me reconsider my entire Instagram strategy. Any chance you offer wilderness photography lessons? üì∏",
        "tone": "playful",
        "confidence": 0.82,
        "reasoning": "Combines compliment with humor and subtle suggestion for future interaction",
        "voice_available": true,
        "expected_outcome": "Discussion about photography skills, potential teaching opportunities",
        "backup_suggestion": "That composition though! You've got serious talent behind the lens"
      },
      {
        "id": "suggestion_def123",
        "text": "I see you're living your best adventure life while I'm over here googling 'how to look cool on hiking trails' üèîÔ∏è",
        "tone": "playful", 
        "confidence": 0.79,
        "reasoning": "Humorous contrast highlighting their impressive lifestyle while staying humble",
        "voice_available": true,
        "expected_outcome": "Likely to offer encouragement or share beginner tips",
        "backup_suggestion": "But honestly, those views are incredible. Makes me want to plan my next adventure"
      }
    ],
    "refresh_available": true,
    "personalization_updated": true,
    "overall_strategy": "Build rapport through playful self-deprecation while genuinely appreciating their outdoor skills",
    "generation_time_ms": 850
  },
  "error_responses": {
    "400_invalid_analysis": {
      "error": "INVALID_ANALYSIS_ID",
      "message": "Analysis ID not found or expired",
      "details": {
        "analysis_id": "analysis_abc123def456",
        "expiry_time": "2025-09-22T15:30:00Z"
      }
    },
    "422_generation_failed": {
      "error": "GENERATION_FAILED",
      "message": "Unable to generate appropriate suggestions for this context",
      "details": {
        "reason": "insufficient_context",
        "suggestion": "Try providing more conversation context or adjusting constraints"
      }
    },
    "429_rate_limit": {
      "error": "RATE_LIMIT_EXCEEDED",
      "message": "Daily suggestion limit reached",
      "details": {
        "daily_limit": 200,
        "reset_time": "2025-09-23T00:00:00Z"
      }
    }
  }
}