{
  "totalTests": 21,
  "passed": 19,
  "failed": 2,
  "details": [
    {
      "name": "V2 API Health Check",
      "status": "PASSED",
      "duration": 183,
      "result": {
        "status": "healthy",
        "timestamp": "2025-09-27T16:46:55.328Z",
        "response_time": 166,
        "components": {
          "ai_orchestrator": "healthy",
          "gemini_vision": "enabled",
          "grok_generation": "enabled",
          "cache_service": "operational",
          "circuit_breakers": "operational"
        },
        "capabilities": [
          "dual_model_pipeline",
          "advanced_visual_analysis",
          "context_aware_generation",
          "intelligent_fallbacks",
          "performance_monitoring",
          "a_b_testing"
        ],
        "pipeline_test": {
          "success": true,
          "latency": 165,
          "components_tested": [
            "gemini_analysis",
            "grok_generation",
            "response_validation"
          ]
        }
      }
    },
    {
      "name": "Performance Metrics",
      "status": "PASSED",
      "duration": 2,
      "result": {
        "status": 401,
        "hasData": true
      }
    },
    {
      "name": "Legacy API Health Check",
      "status": "FAILED",
      "duration": 4,
      "error": "Legacy health check should return 200"
    },
    {
      "name": "Simple Image Processing",
      "status": "PASSED",
      "duration": 248,
      "result": {
        "latency": 248,
        "suggestionCount": 3,
        "pipeline": "dual_model_orchestrated"
      }
    },
    {
      "name": "Tone Variation - playful",
      "status": "PASSED",
      "duration": 133,
      "result": {
        "tone": "playful",
        "suggestionCount": 3
      }
    },
    {
      "name": "Tone Variation - witty",
      "status": "PASSED",
      "duration": 339,
      "result": {
        "tone": "witty",
        "suggestionCount": 3
      }
    },
    {
      "name": "Tone Variation - romantic",
      "status": "PASSED",
      "duration": 90,
      "result": {
        "tone": "romantic",
        "suggestionCount": 3
      }
    },
    {
      "name": "Context Variation - empty",
      "status": "PASSED",
      "duration": 322,
      "result": {
        "context": "empty",
        "suggestionCount": 3
      }
    },
    {
      "name": "Context Variation - Dating app profile photo",
      "status": "PASSED",
      "duration": 91,
      "result": {
        "context": "Dating app profile photo",
        "suggestionCount": 3
      }
    },
    {
      "name": "Context Variation - outdoor hiking photo with mountain background",
      "status": "PASSED",
      "duration": 316,
      "result": {
        "context": "outdoor hiking photo with mountain background",
        "suggestionCount": 3
      }
    },
    {
      "name": "Caching Behavior",
      "status": "PASSED",
      "duration": 376,
      "result": {
        "firstLatency": 88,
        "secondLatency": 281,
        "possibleCacheHit": false
      }
    },
    {
      "name": "Strategy Selection",
      "status": "PASSED",
      "duration": 531,
      "result": {
        "fast": {
          "latency": 86,
          "suggestionCount": 3
        },
        "standard": {
          "latency": 350,
          "suggestionCount": 3
        },
        "comprehensive": {
          "latency": 85,
          "suggestionCount": 3
        }
      }
    },
    {
      "name": "Keyboard Extension Optimization",
      "status": "PASSED",
      "duration": 301,
      "result": {
        "latency": 298,
        "isKeyboardOptimized": true
      }
    },
    {
      "name": "A/B Test Assignment",
      "status": "PASSED",
      "duration": 872,
      "result": {
        "responses": 5,
        "pipelineDistribution": {
          "undefined": 5
        }
      }
    },
    {
      "name": "Missing Image Data Error",
      "status": "PASSED",
      "duration": 4,
      "result": {
        "errorHandled": true,
        "status": 400
      }
    },
    {
      "name": "Invalid Image Data Handling",
      "status": "PASSED",
      "duration": 87,
      "result": {
        "status": 200,
        "fallbackProvided": true
      }
    },
    {
      "name": "Timeout Handling",
      "status": "PASSED",
      "duration": 288,
      "result": {
        "completed": true,
        "latency": 284
      }
    },
    {
      "name": "Suggestion Quality Validation",
      "status": "PASSED",
      "duration": 87,
      "result": {
        "suggestionCount": 3,
        "averageScore": 0.69,
        "averageLength": 57.666666666666664
      }
    },
    {
      "name": "Uniqueness Validation",
      "status": "PASSED",
      "duration": 318,
      "result": {
        "totalSuggestions": 3,
        "uniqueSuggestions": 3,
        "duplicatesFound": 0
      }
    },
    {
      "name": "Concurrent Request Handling",
      "status": "PASSED",
      "duration": 180,
      "result": {
        "total": 5,
        "successful": 5,
        "failed": 0,
        "successRate": 1
      }
    },
    {
      "name": "Legacy API Functionality",
      "status": "FAILED",
      "duration": 2,
      "error": "Should handle legacy request"
    }
  ],
  "performance": {
    "averageLatency": 0,
    "successRate": 0,
    "cacheHitRate": 0
  },
  "errors": [
    {
      "test": "Legacy API Health Check",
      "error": "Legacy health check should return 200",
      "timestamp": "2025-09-27T16:46:55.339Z"
    },
    {
      "test": "Legacy API Functionality",
      "error": "Should handle legacy request",
      "timestamp": "2025-09-27T16:46:59.928Z"
    }
  ],
  "timestamp": "2025-09-27T16:46:59.928Z",
  "environment": {
    "baseUrl": "http://localhost:3000",
    "nodeVersion": "v24.7.0",
    "platform": "darwin"
  }
}